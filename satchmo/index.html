<!DOCTYPE html>
<html lang="en">
<!--[if lt IE 9]><script language="javascript" type="text/javascript" src="//html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Louis Armstrong Discography</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- <link rel="shortcut icon" href="/images/favicon.png"> -->
    <meta name="description" content="I believe music can be a form of perfection - with nothing added or subtracted, flawless just the way it is. This is my take on the music and the people that make it. It's mostly about jazz and blues. Content and design by Žan Anderle">
    <link rel="canonical" href="http://musingsonmusic.com/satchmo/">

    

    <!-- Custom CSS -->
<!--    <link rel="stylesheet" href="/css/main.css"> -->
    <link href='http://fonts.googleapis.com/css?family=Belleza|Droid+Serif' rel='stylesheet' type='text/css'>
    <!-- SCSS, baby -->
    <link rel="stylesheet" href="/css/style.css">
    <!--[if lt IE 11]>
    <style type="text/css">
    .ie-warning { display: inline; }
    </style>
    <![endif]-->
    <script src="/js/modernizr.js"></script>
    <script src="/js/jquery-1.11.1.min.js"></script>
    <script src="/js/default.js"></script>
    <script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-53540157-1', 'auto');
      ga('send', 'pageview');

    </script>
</head>


    <body>
      <div id="wrap">
        <header class="site-header row clear">

    <nav class="social-media-nav col col-3 tablet-col-4 mobile-no-padding mobile-no-margin">
      <ul class="mobile-no-margin">
        <li class="inline-block">
          <a class="icon-twitter twitter mobile-no-margin" href="https://twitter.com/z_anderle" target="_blank"></a>
        </li>
        <li class="inline-block">
          <a class="icon-instagramm instagram mobile-no-margin" href="https://instagram.com/zanderle" target="_blank"></a>
        </li>
        <li class="inline-block">
          <a class="icon-mail-alt rss-feed mobile-no-margin" href="http://eepurl.com/bc2g2v" target="_blank" title="Subscribe!"></a>
        </li>
      </ul>
    </nav>
    <div class="logo-wrapper col col-6 tablet-col-4">
      <a class="main-logo container block" href="/"></a>
    </div>
    <div class="menu-wrapper col col-3 tablet-col-4">
      <a class="icon-menu right inline-block higher" id="menu" href="#"></a>
    </div>
    <nav class="site-nav right">
      <ul class="no-padding no-margin">
        <li class="inline-block">
          <a class="page-link" href="/">Blog</a>
        </li>
        
            
            
            
        
            
            
          <li class="inline-block">
            <a class="page-link" href="/about/">About</a>
          </li>
            
            
        
            
            
            
        
            
            
            
        
            
        
            
            
            
        
            
            
            
        
            
            
            
        
            
            
            
        
            
            
            
        
            
            
            
        
      </ul>
    </nav>



</header>

<div class="subheader text-center">
<h4 class="white heading inline-block">Music can be a form of perfection - with nothing added or subtracted, flawless just the way it is.</h4>
</div>


        <div class="row clear container">
          <div class="post single-post">

  <header class="post-header">
    <h1 class="text-center heading">Louis Armstrong Discography</h1>
    <!-- <div class="text-center misc">
        <i class="icon-calendar-empty inline-block"></i>
        <span class="inline-block"></span>
        
        <i class="icon-tag inline-block"></i>
        <span class="inline-block tags">Louis Armstrong Visualization</span>
    </div> -->
  </header>

  <article class="post-content">
  <h4 id="louis-armstrongs-lifework-visualized">Louis Armstrong’s lifework visualized</h4>

<div id="satchmo-container">
    <div class="plot-clip">
    </div>
    <div id="satchmo" style="width: 100%; overflow: auto;"></div>
    <div class="tooltip">
        <div class="gig"></div>
        <div class="date-and-location"></div>
        <div class="songs"></div>
        <div class="lineup"></div>
        <div class="comments"></div>
    </div>
    <div id="session-info"></div>
</div>

<p><em class="none show-mobile">Unfortunately this interactive visualization is not supported on mobile devices. Come check it out on your tablet or computer.</em></p>

<p><em class="ie-warning">This visualization might not work properly under your browser. Consider upgrading or getting a different browser.</em></p>

<p><span class="font-small">A few technical details, for those interested. I used <a href="http://d3js.org/">d3</a> library for the actual visualization. To get the data from the website I mentioned earlier, I used <a href="http://import.io">import.io</a> (which was a joy to use, if I may add). And finally for parsing and cleaning up, Python was the way to go.</span></p>

<script type="text/javascript" src="/js/d3.min.js"></script>

<script type="text/javascript" src="/js/louis_armstrong.js"></script>

<script type="text/javascript" src="/js/handlebars-v3.0.1.js"></script>

<script id="event-template" type="text/x-handlebars-template">

  <div class="entry">
    <h3>{{title}}</h3>
    <p>
      {{body}}
    </p>
  </div>

</script>

<script id="session-template" type="text/x-handlebars-template">

<h3>{{name}}</h3>
<h4>{{display_date}} - {{location}}</h4>
<div class="first-section">
<div class="inline-block left split">
{{lineup}}
</div>
<div class="inline-block left split">
  {{{songs}}}
</div>
</div>
<br/>
<br/>
<div class="no-split block">
{{comments}}
</div>

</script>

<script async="" type="text/javascript">
// $(document).ready(function () {
// Set the dimensions of the canvas / graph
var margin = {top: 40, right: 40, bottom: 40, left: 40};
var width = $('.post').width() - margin.left - margin.right;
var height = 600 - margin.top - margin.bottom;

$('.plot-clip').width(width)
                .height(height)
                .css({'left': margin.left, 'top': margin.top});


// Other variables

// Date formater
var dateFormat = d3.time.format('%0d.%0m.%Y');

// Set scales
var minDate = dateFormat.parse('4.8.1901');
var maxDate = dateFormat.parse('6.7.1971');

var xScale = d3.time.scale()
            .range([0, width])
            .domain([minDate, maxDate]);

var cScale = d3.scale.ordinal()
            .range(["#8dd3c7","#d5d500","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"])
            .domain(satchmo_data, function (d) { d.location_group; });

var rScale = d3.scale.linear()
            .range([5, 18])
            .domain(d3.extent(satchmo_data, function (d) { return d.members.length; }));

// Zoom

var zoom = d3.behavior.zoom()
    .x(xScale)
    .scaleExtent([1,100])
    .on('zoom', zoomed);

// Moving average

var yValue = function(d) {
    // Don't use this if you don't have to. Very expensive...
    interval = 360;
    low = d3.time.day.offset(d, -(interval/2));
    high = d3.time.day.offset(d, interval/2);
    // low = d3.time.day.offset(d, -interval);
    // high = d;
    function isInInterval (value) {
        return ((dateFormat.parse(value.display_date) < high) && (dateFormat.parse(value.display_date) > low));
    };
    recordings = satchmo_data.filter(isInInterval);
    return recordings.length;
};

var yScale = d3.scale.linear()
                    .range([5*height/6, height/2])
                    .domain([0, d3.max(satchmo_data, function(d) { return d.density; })]);
                    // .domain([0, 37]);

var lineFunction = d3.svg.line()
                        .x(function (d) { return xScale(d); })
                        .y(function (d) { return yScale(yValue(d)); })
                        .interpolate('basis');

// var xScale = d3.scale.ordinal()
//                     .rangeBands([0, width], 0.52, 0.05)
//                     .domain(d3.range(d3.min(data, function(d) { return d.release_date - 1; }), d3.max(data, function(d) { return d.release_date + 1; })));
// var yScale = d3.scale.ordinal()
//                     .rangeBands([height, 0], 0, 0.1)
//                     .domain(d3.range(0, maxPerYear));
// var cScale = d3.scale.ordinal()
//                 .range(["#a6cee3","#1f78b4","#b2df8a","#555","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928", "#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"])
//                 .domain(data, function(d) { return d.recording_locations.join(' or '); });
// var oScale = d3.scale.linear()
//                 .range([0.2, 1.0])
//                 .domain([0, 10]);
// var rScale = d3.scale.linear()
//                 .range([xScale.rangeBand()*0.7, xScale.rangeBand()*1.5])
//                 .domain([0, 10]);

// Set xAxis
var xAxis = d3.svg.axis().scale(xScale).orient('bottom');

// Add svg canvas
var svg = d3.select("#satchmo").append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
    .append("g")
    .attr('class', 'main')
    .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

var plotArea = svg.append('g')
    .attr('clip-path', 'url(#plotAreaClip)')
    .call(zoom);

plotArea.append('clipPath')
    .attr('id', 'plotAreaClip')
    .append('rect')
    .attr('width', width)
    .attr('height',height);

var rect = plotArea.append("rect")
    .attr("width", width)
    .attr("height", height)
    .style("fill", "none")
    .style("pointer-events", "all");

var dates = d3.time.day.range(new Date(1900,1,1), new Date(1971,7,8), 180);

// Add sessions
var sessions = plotArea.selectAll('circle').data(satchmo_data).enter()
        .append('circle')
        .attr('class', 'session')
        .attr('r', 5)
        .attr('cx', function (d) { return xScale(dateFormat.parse(d.display_date)); })
        .attr('cy', height)
        .attr('fill', function (d) { return cScale(d.location_group); })
        .attr('fill-opacity', 0.3);

// Add line
// var lineGraph = svg.append('path')
//                     .attr('d', lineFunction(dates))
//                     .attr('stroke', 'blue')
//                     .attr('stroke-width', 1)
//                     .attr('fill', 'none');


// Interactivity

var source   = $("#session-template").html();
var sessionTemplate = Handlebars.compile(source);
var sessionInfo = d3.select('#session-info');

sessions.on('mouseover', function (d) {
    sessionInfo.html(sessionTemplate(d))
                .style('left', (margin.left + xScale(dateFormat.parse(d.display_date))) + 'px')
                .style('top', margin.top + height/4 + 50 + 'px');
});

// Events

var source   = $("#event-template").html();
var eventTemplate = Handlebars.compile(source);

var importantEvents = [{
    title: 'Birth',
    body: "Armstrong was born into a very poor family in New Orleans, Louisiana, the grandson of slaves. He spent his youth in poverty, in a rough neighborhood, known as “the Battlefield”, which was part of the Storyville legal prostitution district.",
    date: '04.08.1901'
}];


// Plot Events

var plotEvents = d3.select('#satchmo-container .plot-clip').selectAll('.important-event')
        .data(importantEvents)
        .enter()
        .append('div')
        .attr('class', 'important-event')
        // .style('clip-path', 'url(#plotAreaClip)')
        .style('left', function (d) { return (margin.left + xScale(dateFormat.parse(d.date)) + 'px'); })
        .style('top', 80 + 'px')
        .html(function (d) { return eventTemplate(d); });

plotArea.selectAll('line')
    .data(importantEvents)
    .enter()
    .append('line')
    .style("stroke-dasharray", "5,2")
    .style('stroke', '#aaaaaa')
    .attr('x1', function (d) { return xScale(dateFormat.parse(d.date)); })
    .attr('x2', function (d) { return xScale(dateFormat.parse(d.date)); })
    .attr('y1', 180)
    .attr('y2', height - 25);

// Add axis

svg.append('g')
    .attr('class', 'x axis')
    .attr('transform', function (d) { return 'translate(0, ' + height + ')'; })
    .call(xAxis);

// Initial transition

n = satchmo_data.length;
duration = 1000;

containerPosition = $('#satchmo-container').position();
containerHeight = $('#satchmo-container').height();
windowHeight = $(window).height();
notFired = true;

$(window).scroll(function () {
    if (notFired) {
        if ((windowHeight + $(this).scrollTop()) >= (containerPosition.top + containerHeight)) {
            notFired = false;
            setTimeout(transitionSessions, 1);
        }
    }
});
function transitionSessions() {
sessions.transition()
        .delay(function(d, i) { return 1000 + i / n * duration; })
        .attr('r', function (d) { return rScale(d.members.length); })
        .attr('cy', function (d) { return yScale(d.density); });
}

// Zoom functions

function zoomed() {
    if (xScale.domain()[0] < minDate) {
        var x = zoom.translate()[0] - xScale(minDate) + xScale.range()[0];
        zoom.translate([x, 0]);
    } else if (xScale.domain()[1] > maxDate) {
        var x = zoom.translate()[0] - xScale(maxDate) + xScale.range()[1];
        zoom.translate([x, 0]);
    }
    redrawChart();
}

function redrawChart() {
    svg.select('.x.axis').call(xAxis);
    sessions.attr('cx', function (d) { return xScale(dateFormat.parse(d.display_date)); });
    plotEvents.style('left', function (d) { return (margin.left + xScale(dateFormat.parse(d.date)) + 'px'); })
}
// });
</script>


<!--   <div class="invitation text-center">Did you like this post? Subscribe to my blog and be notified whenever I post something new!
    <br/>
    <br/>
    <a href="http://eepurl.com/bc2g2v" target="_blank" class="button">Subscribe >></a>
</div> -->
  </article>



        </div>
      </div>

    <footer class="row clear text-center gray">
    <a href="/" class="footer-heading inline-block gray">My Musings on Music</a> - content and design by Žan Anderle
</footer>


    </body>
</html>